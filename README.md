<h1>БАЗЗЕР — викторина для Телеграма</h1>

<p>Телеграм-бот, который помогает проводить живые квизы «кто первый нажал». Все взаимодействие проходит в личных чатах: игроки регистрируют команды и ждут сигнал, ведущий управляет игрой через панель, а бот фиксирует очередь и ведёт счёт.</p>

<h2>⚙️ Стек</h2>
<ul>
  <li>Python 3.12, Aiogram 3, SQLAlchemy 2 async, SQLite, Loguru</li>
  <li>Запуск через Poetry или Docker Compose</li>
  <li>Тесты на Pytest, линтер Ruff, mypy</li>
</ul>

<h2>🚀 Быстрый старт</h2>
<ol>
  <li>Скопируйте конфиг: <code>cp .env.example .env</code> и заполните <code>BOT_TOKEN</code> и <code>DEFAULT_ADMIN_IDS</code> (список ID через запятую, без пробела).</li>
  <li>Установите зависимости: <code>poetry install</code>.</li>
  <li>Запустите бота: <code>poetry run quizbot</code> или <code>make run</code>. Для Docker: <code>make up</code>.</li>
</ol>

<h2>🎙️ Что видит ведущий</h2>
<ul>
  <li>Команда <code>/start</code> открывает панель с кнопками «🚀 Запустить игру», «❓ Запустить вопрос», «📊 Таблица очков», «🛑 Завершить игру».</li>
  <li>Запуск игры рассылает пуши игрокам: тем, у кого есть команда — готовиться, остальным — зарегистрироваться.</li>
  <li>Во время вопроса бот сообщает, какая команда нажала первой, и предлагает кнопки «✅ Верно» или «❌ Неверно».</li>
  <li>После отметки результата кнопка удаляется, очередь обновляется, а игроки получают уведомления.</li>
</ul>

<h2>🧑‍🤝‍🧑 Что видят игроки</h2>
<ul>
  <li>Команда <code>/start</code> показывает статус игры и меню: «🆕 Зарегистрировать команду» и «🛎️ Нажать БАЗЗЕР».</li>
  <li>Бот просит отправить название команды одним сообщением; имена уникальны без учёта регистра.</li>
  <li>Когда ведущий запускает вопрос, приходит пуш «Новый вопрос!» и активируется «БАЗЗЕР».</li>
  <li>Первый игрок получает уведомление «Вы первые! 🔥», остальные видят свою позицию в очереди.</li>
</ul>

<h2>📊 Учёт очков</h2>
<ul>
  <li>Каждое нажатие фиксируется в памяти (очередь защищена <code>asyncio.Lock</code>).</li>
  <li>Кнопка «✅ Верно» начисляет один балл, «❌ Неверно» переключает очередь на следующую команду.</li>
  <li>Текущая таблица доступна по кнопке «📊 Таблица очков», финальная рассылка отправляется при завершении игры.</li>
</ul>

<h2>🛠️ Полезные команды</h2>
<ul>
  <li><code>/start</code> — меню игрока или панель ведущего.</li>
  <li><code>/help</code> — краткая справка.</li>
</ul>

<h2>🧪 Тесты и качество</h2>
<ul>
  <li>Запуск тестов: <code>poetry run pytest --cov=quizbot --cov-report=term-missing</code>.</li>
  <li>Линтеры: <code>make lint</code>, форматирование импорта: <code>make fmt</code>.</li>
</ul>

<h2>📚 Дополнительные материалы</h2>
<ul>
  <li><code>docs/USAGE.md</code> — подробное руководство для ведущего и игроков.</li>
  <li><code>docs/ARCHITECTURE.md</code> — описание структуры и потоков данных.</li>
  <li><code>docs/SCENARIOS.md</code> — готовые сценарии и шпаргалки.</li>
</ul>

<p>Приятных викторин и честной борьбы за кнопку! 🔔</p>
